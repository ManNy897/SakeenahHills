<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sakeenah Hills – Rumah Dijual</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="bg-gray-50 text-gray-900">
  <!-- Hero Section with Dark Overlay -->
  <header class="relative min-h-screen flex flex-col justify-center items-center text-center">
    <div class="absolute inset-0 bg-cover bg-center" style="background-image: url('images/hero.jpg');"></div>
    <div class="absolute inset-0 bg-black opacity-40"></div>
    <div class="relative z-10 text-white px-4">
      <h1 class="text-4xl md:text-6xl font-bold">Sakeenah Hills</h1>
      <p class="text-xl md:text-2xl mt-4">Rumah modern dan terjangkau di lingkungan yang indah</p>
      <a href="#homes" class="mt-6 inline-block bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg shadow-lg">
        Lihat Rumah
      </a>
    </div>
  </header>

  <!-- About Section -->
  <section id="about" class="max-w-4xl mx-auto p-6 text-center">
    <h2 class="text-3xl font-semibold mb-4">Tentang Komunitas</h2>
    <p class="text-lg text-gray-700">Sakeenah Hills berlokasi di <strong>Sumber Agung</strong>, sebuah area yang sejuk dan asri dengan udara yang bersih. Akses ke kompleks sangat mudah karena terhubung langsung dengan jalan utama dan memiliki jalan aspal hampir sampai ke gerbang. Lokasinya dekat dengan beberapa sekolah seperti SMA 7 dan Insan Kamil, serta hanya sekitar 5 menit dari pusat Kemiling yang memiliki banyak pilihan tempat makan. Kompleks ini terdiri dari total 6 rumah eksklusif, masing-masing dilengkapi dengan pompa air sendiri.</p>
    <a href="https://maps.app.goo.gl/HEHhjeqRAwVhiJVX8" target="_blank" rel="noopener noreferrer" class="mt-4 inline-block bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg shadow">
      Lihat Lokasi di Google Maps
    </a>
  </section>

  <!-- Homes Section -->
  <section id="homes" class="max-w-6xl mx-auto p-6">
    <h2 class="text-3xl font-semibold text-center mb-8">Rumah yang Tersedia</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <!-- Example Home Card -->
      <div class="bg-white shadow rounded-xl overflow-hidden">
        <img src="images/house_1.jpeg" alt="Rumah Contoh" class="w-full h-56 object-cover">
        <div class="p-4">
          <h3 class="text-xl font-semibold">
            <a href="house-detail.html" class="text-blue-600 hover:underline">Rumah Contoh</a>
          </h3>
          <p class="text-lg font-bold text-blue-600 mt-1">Rp 430.000.000</p>
          <div class="flex flex-wrap items-center gap-4 text-gray-600 mt-2">
            <div class="flex items-center gap-1">
              <i data-lucide="bed"></i>
              <span>2</span>
            </div>
            <div class="flex items-center gap-1">
              <i data-lucide="bath"></i>
              <span>1</span>
            </div>
            <div class="flex items-center gap-1">
              <i data-lucide="building"></i>
              <span>1 Lantai</span>
            </div>
            <div class="flex items-center gap-1">
              <i data-lucide="trees"></i>
              <span>Luas Tanah: 112 m²</span>
            </div>
            <div class="flex items-center gap-1">
              <i data-lucide="ruler"></i>
              <span>Luas Bangunan: 50 m²</span>
            </div>
          </div>
          <span class="inline-block bg-yellow-300 text-yellow-900 text-sm px-2 py-1 mt-2 rounded">Sedang Dibangun</span>
          <div class="mt-4">
            <a href="#virtual-tour" class="inline-block bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded shadow">
              Lihat Tur Virtual
            </a>
          </div>
        </div>
      </div>

      <div class="bg-white shadow rounded-xl overflow-hidden">
        <img src="images/house_2.jpeg" alt="Rumah" class="w-full h-56 object-cover">
        <div class="p-4">
          <h3 class="text-xl font-semibold">Rumah Mendatang</h3>
          <p class="text-gray-600">Bangun sesuai permintaan</p>
          <span class="inline-block bg-green-200 text-green-800 text-sm px-2 py-1 mt-2 rounded">Tersedia untuk Dibangun</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Virtual Tour Section with Overlay -->
  <section id="virtual-tour" class="bg-gray-100 py-20 text-center relative">
    <h2 class="text-3xl font-semibold mb-6">Tur Virtual</h2>
    <div class="max-w-5xl mx-auto relative">
      <iframe id="tourFrame"
        src="https://my.matterport.com/show/?m=empty&play=1"
        frameborder="0" 
        allowfullscreen 
        allow="xr-spatial-tracking" 
        class="w-full h-96 rounded-lg shadow">
      </iframe>

      <!-- Lead Capture Overlay -->
      <div id="leadOverlay" class="hidden absolute inset-0 bg-black bg-opacity-70 flex items-center justify-center">
        <div class="bg-white rounded-xl p-6 max-w-md w-full text-center animate-fadeIn">
          <h2 class="text-xl font-semibold mb-4">Lihat Tur Lengkap</h2>
          <p class="mb-4">Masukkan kontak Anda untuk melanjutkan tur virtual.</p>
          <form id="leadForm" class="space-y-3">
            <input type="text" name="name" placeholder="Nama" class="w-full border p-2 rounded" required>
            <input type="text" name="contact" placeholder="Nomor WhatsApp atau Email" class="w-full border p-2 rounded" required>
            <p id="leadError" class="text-red-600 hidden text-sm"></p>
            <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded w-full">Lanjutkan</button>
          </form>
          <button id="skipOverlay" class="text-gray-500 text-sm mt-3 hover:underline">Lanjutkan tanpa mengisi</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact Section -->
  <section id="contact" class="max-w-4xl mx-auto p-6 text-center">
    <h2 class="text-3xl font-semibold mb-4">Hubungi Kami</h2>
    <form id="contactForm" class="space-y-4 max-w-md mx-auto">
      <input type="text" name="name" placeholder="Nama Anda" class="w-full border p-3 rounded" required>
      <input type="text" name="contact" placeholder="Email atau Nomor WhatsApp" class="w-full border p-3 rounded" required>
      <textarea name="message" placeholder="Pesan" class="w-full border p-3 rounded" rows="4" required></textarea>
      <p id="contactError" class="text-red-600 hidden text-sm"></p>
      <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg w-full">Kirim Pesan</button>
    </form>
  </section>

  <!-- Social Links -->
  <div class="flex justify-center space-x-6 py-6 text-3xl">
    <a href="https://www.instagram.com/sakeenah.living/" target="_blank" class="hover:scale-110 transition-transform text-pink-500">
      <i class="fab fa-instagram"></i>
    </a>
    <a href="https://www.facebook.com/profile.php?id=61580931691896" target="_blank" class="hover:scale-110 transition-transform text-blue-600">
      <i class="fab fa-facebook"></i>
    </a>
    <a href="https://wa.me/6281284487002" target="_blank" class="hover:scale-110 transition-transform text-green-600">
      <i class="fab fa-whatsapp"></i>
    </a>
  </div>

  <!-- Footer -->
  <footer class="bg-gray-800 text-gray-300 text-center p-4">
    <p>&copy; 2025 Sakeenah Hills. Semua hak dilindungi.</p>
  </footer>

  <script>
  lucide.createIcons();

  function isValidEmail(email) {
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
  }

  function isValidWhatsApp(number) {
    const cleaned = number.replace(/\s|-/g, "");
    return /^(\+62|0?8)\d{8,11}$/.test(cleaned);
  }

  const tourFrame = document.getElementById('tourFrame');
  const leadOverlay = document.getElementById('leadOverlay');
  const skipOverlay = document.getElementById('skipOverlay');
  const leadForm = document.getElementById('leadForm');
  const leadError = document.getElementById('leadError');

  async function retryLeadSubmission(payload) {
    for (let i = 0; i < 5; i++) {
      try {
        await fetch("https://script.google.com/macros/s/AKfycbyiJckqwXz9ZIb_tYoFBTkEz0YlKD5CcXPR5XiOHRwlp0N_VQ_GmXL7hE4Jqix3DPXU/exec", {
          method: "POST",
          body: JSON.stringify(payload)
        });
        localStorage.setItem('leadCaptured', 'true');
        console.log('Lead successfully saved on retry');
        return;
      } catch (err) {
        console.warn('Retry failed, attempt', i + 1);
        await new Promise(res => setTimeout(res, 2000));
      }
    }
    console.error('All retries failed. Data kept in localStorage.');
  }

  const savedLead = localStorage.getItem('leadData');
  if (savedLead && !localStorage.getItem('leadCaptured')) {
    retryLeadSubmission(JSON.parse(savedLead));
  }

  if (!localStorage.getItem('leadCaptured')) {
    const observer = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          setTimeout(() => leadOverlay.classList.remove('hidden'), 30000);
          observer.unobserve(tourFrame);
        }
      });
    }, { threshold: 0.5 });
    observer.observe(tourFrame);
  }

  skipOverlay.addEventListener('click', () => {
    leadOverlay.classList.add('hidden');
    localStorage.setItem('leadCaptured', 'true');
  });

  leadForm.addEventListener('submit', (e) => {
    e.preventDefault();
    const formData = new FormData(leadForm);
    const payload = Object.fromEntries(formData.entries());

    if (!isValidEmail(payload.contact) && !isValidWhatsApp(payload.contact)) {
      leadError.textContent = "Masukkan email atau nomor WhatsApp Indonesia yang valid (+62 atau 08).";
      leadError.classList.remove('hidden');
      return;
    }
    leadError.classList.add('hidden');

    localStorage.setItem('leadData', JSON.stringify(payload));
    localStorage.setItem('leadCaptured', 'true');
    leadOverlay.classList.add('hidden');

    retryLeadSubmission(payload);
  });

  const contactForm = document.getElementById('contactForm');
  const contactError = document.getElementById('contactError');

  contactForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    const formData = new FormData(contactForm);
    const payload = Object.fromEntries(formData.entries());

    if (!isValidEmail(payload.contact) && !isValidWhatsApp(payload.contact)) {
      contactError.textContent = "Masukkan email atau nomor WhatsApp Indonesia yang valid (+62 atau 08).";
      contactError.classList.remove('hidden');
      return;
    }
    contactError.classList.add('hidden');

    try {
      await fetch("https://script.google.com/macros/s/AKfycbyiJckqwXz9ZIb_tYoFBTkEz0YlKD5CcXPR5XiOHRwlp0N_VQ_GmXL7hE4Jqix3DPXU/exec", {
        method: "POST",
        body: JSON.stringify(payload)
      });
      alert("Pesan Anda telah terkirim! Terima kasih.");
      contactForm.reset();
    } catch (error) {
      alert("Terjadi kesalahan saat mengirim pesan. Silakan coba lagi.");
      console.error(error);
    }
  });
  </script>

  <style>
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }
    .animate-fadeIn { animation: fadeIn 0.3s ease-out forwards; }
  </style>
</body>
</html>